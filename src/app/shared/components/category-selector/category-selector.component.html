<div class="app-category-selector" [formGroup]="form">
  <ng-container *ngIf="autocomplete">
    <mat-form-field appearance="outline">
      <mat-label>{{ label }}</mat-label>
      <input
        type="text"
        [placeholder]="placeholder"
        matInput
        formControlName="selector"
        [matAutocomplete]="category"
      >
      <mat-error *ngIf="categoryControl.invalid && required">To pole jest wymagane!</mat-error>
      <mat-autocomplete #category="matAutocomplete" [displayWith]="categoryDisplay">
        <mat-option *ngFor="let option of filteredCategories$ | async" [value]="option">
          {{ option.name }}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </ng-container>
  <ng-container *ngIf="!autocomplete">
    <mat-form-field appearance="outline">
      <mat-label>{{ label }}</mat-label>
      <mat-select formControlName="selector">
        <mat-option>Brak</mat-option>
        <mat-option *ngFor="let option of categories" [value]="option.id">{{ option.name }}</mat-option>
      </mat-select>
      <mat-error *ngIf="categoryControl.invalid && required">To pole jest wymagane!</mat-error>
    </mat-form-field>
  </ng-container>
</div>
